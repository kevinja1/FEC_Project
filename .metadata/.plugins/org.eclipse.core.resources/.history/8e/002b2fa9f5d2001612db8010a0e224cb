package application;

import java.net.URL;
import java.sql.SQLException;
import java.util.ResourceBundle;

import javafx.event.ActionEvent;
import javafx.fxml.FXML;
import javafx.fxml.FXMLLoader;
import javafx.fxml.Initializable;
import javafx.scene.Parent;
import javafx.scene.Scene;
import javafx.scene.control.Label;
import javafx.scene.control.PasswordField;
import javafx.scene.control.TextField;
import javafx.util.Duration;
import tray.notification.NotificationType;
import tray.notification.TrayNotification;

public class LoginScreenController implements Initializable {
		public LoginModel loginModel = new LoginModel();
		
		@FXML
		private TextField txtUsername;
		
		@FXML 
		private PasswordField txtPassword;
		
		@Override
		public void initialize(URL location, ResourceBundle resources){
			
		}
		
		public void Login (ActionEvent event)
		{
			try{
				if(loginModel.isLogin(txtUsername.getText(), txtPassword.getText())){
					    Parent root = FXMLLoader.load(getClass().getResource("Main_Menu.fxml"));
				        Main.setTitle("Login");
				        primaryStage.setScene(new Scene(root, 628, 295));
				        primaryStage.show();
				} 
				else {
					 	NotificationType notificationType = NotificationType.ERROR;
			            TrayNotification tray = new TrayNotification();
			            tray.setTitle("Error Login");
			            tray.setMessage("Incorrect login or password");
			            tray.setNotificationType(notificationType);
			            tray.showAndDismiss(Duration.millis(5000));

			            txtUsername.clear();
			            txtPassword.clear();

				}
			} 
			catch (SQLException e){
				e.printStackTrace();
			}		
		}	
}

